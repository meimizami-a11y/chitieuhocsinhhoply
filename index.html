<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qu·∫£n l√Ω Chi ti√™u - H·ªçc sinh</title>
    <style>
        /* ===== RESET & FONTS ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Times New Roman', Times, serif;
            background: linear-gradient(135deg, #ff6b9d 0%, #c44569 100%);
            min-height: 100vh;
            padding: 20px;
        }

        /* ===== CONTAINER CH√çNH ===== */
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        /* ===== HEADER ===== */
        .header {
            background: linear-gradient(135deg, #ff6b9d 0%, #c44569 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 14px;
            opacity: 0.9;
        }

        /* ===== T·ªîNG CHI TI√äU ===== */
        .summary {
            background: #f8f9fa;
            padding: 25px 30px;
            border-bottom: 2px solid #e9ecef;
        }

        .summary h2 {
            font-size: 16px;
            color: #6c757d;
            margin-bottom: 10px;
        }

        .total-amount {
            font-size: 36px;
            font-weight: bold;
            color: #ff6b9d;
        }

        /* ===== FORM NH·∫¨P LI·ªÜU ===== */
        .input-section {
            padding: 30px;
            border-bottom: 2px solid #e9ecef;
        }

        .input-section h3 {
            margin-bottom: 20px;
            color: #333;
            font-size: 18px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: #495057;
            font-weight: 500;
            font-size: 14px;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 14px;
            transition: all 0.3s;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #ff6b9d;
            box-shadow: 0 0 0 3px rgba(255, 107, 157, 0.1);
        }

        /* ===== CATEGORY MANAGEMENT ===== */
        .category-controls {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .category-controls input {
            flex: 1;
        }

        .btn-add-category,
        .btn-delete-category {
            padding: 12px 20px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s;
        }

        .btn-add-category {
            background: #28a745;
            color: white;
        }

        .btn-add-category:hover {
            background: #218838;
            transform: translateY(-2px);
        }

        .btn-delete-category {
            background: #dc3545;
            color: white;
        }

        .btn-delete-category:hover {
            background: #c82333;
            transform: translateY(-2px);
        }

        /* ===== BUTTONS ===== */
        .btn-primary {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #ff6b9d 0%, #c44569 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 107, 157, 0.4);
        }

        /* ===== DANH S√ÅCH CHI TI√äU ===== */
        .expense-list {
            padding: 30px;
        }

        .expense-list h3 {
            margin-bottom: 20px;
            color: #333;
            font-size: 18px;
        }

        .expense-item {
            background: #f8f9fa;
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s;
        }

        .expense-item:hover {
            background: #e9ecef;
            transform: translateX(5px);
        }

        .expense-info {
            flex: 1;
        }

        .expense-name {
            font-weight: 600;
            color: #333;
            margin-bottom: 5px;
        }

        .expense-category {
            display: inline-block;
            padding: 4px 12px;
            background: #ff6b9d;
            color: white;
            border-radius: 20px;
            font-size: 12px;
        }

        .expense-amount {
            font-size: 18px;
            font-weight: bold;
            color: #dc3545;
            margin-right: 15px;
        }

        .btn-delete {
            background: #dc3545;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s;
        }

        .btn-delete:hover {
            background: #c82333;
            transform: scale(1.05);
        }

        .empty-state {
            text-align: center;
            padding: 40px;
            color: #6c757d;
        }

        .empty-state svg {
            width: 80px;
            height: 80px;
            margin-bottom: 20px;
            opacity: 0.3;
        }

        /* ===== RESPONSIVE ===== */
        @media (max-width: 600px) {
            .container {
                border-radius: 0;
            }

            .header h1 {
                font-size: 24px;
            }

            .total-amount {
                font-size: 28px;
            }

            .expense-item {
                flex-direction: column;
                align-items: flex-start;
            }

            .expense-amount {
                margin: 10px 0;
            }

            .category-controls {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- HEADER -->
        <div class="header">
            <h1>üí∞ Qu·∫£n l√Ω Chi ti√™u</h1>
            <p>Theo d√µi chi ti√™u h√†ng ng√†y c·ªßa b·∫°n</p>
        </div>

        <!-- T·ªîNG CHI TI√äU -->
        <div class="summary">
            <h2>T·ªïng chi ti√™u</h2>
            <div class="total-amount" id="totalAmount">0 ‚Ç´</div>
        </div>

        <!-- FORM NH·∫¨P KHO·∫¢N CHI -->
        <div class="input-section">
            <h3>Th√™m kho·∫£n chi m·ªõi</h3>
            <form id="expenseForm">
                <div class="form-group">
                    <label for="expenseName">T√™n kho·∫£n chi</label>
                    <input type="text" id="expenseName" placeholder="V√≠ d·ª•: Mua v·ªü, ƒÇn tr∆∞a..." required>
                </div>

                <div class="form-group">
                    <label for="expenseAmount">S·ªë ti·ªÅn (‚Ç´)</label>
                    <input type="number" id="expenseAmount" placeholder="10000" min="0" required>
                </div>

                <div class="form-group">
                    <label for="expenseCategory">Danh m·ª•c</label>
                    <select id="expenseCategory" required>
                        <!-- Danh m·ª•c s·∫Ω ƒë∆∞·ª£c th√™m ƒë·ªông b·∫±ng JavaScript -->
                    </select>
                </div>

                <!-- QU·∫¢N L√ù DANH M·ª§C -->
                <div class="form-group">
                    <label>Qu·∫£n l√Ω danh m·ª•c</label>
                    <div class="category-controls">
                        <input type="text" id="newCategoryName" placeholder="T√™n danh m·ª•c m·ªõi...">
                        <button type="button" class="btn-add-category" onclick="addCategory()">Th√™m</button>
                        <button type="button" class="btn-delete-category" onclick="deleteCategory()">X√≥a danh m·ª•c ƒëang ch·ªçn</button>
                    </div>
                </div>

                <button type="submit" class="btn-primary">Th√™m kho·∫£n chi</button>
            </form>
        </div>

        <!-- DANH S√ÅCH CHI TI√äU -->
        <div class="expense-list">
            <h3>Danh s√°ch chi ti√™u</h3>
            <div id="expenseListContainer">
                <!-- Danh s√°ch s·∫Ω ƒë∆∞·ª£c th√™m ƒë·ªông b·∫±ng JavaScript -->
            </div>
        </div>
    </div>

    <script>
        // ===== KH·ªûI T·∫†O D·ªÆ LI·ªÜU =====
        
        // Danh m·ª•c m·∫∑c ƒë·ªãnh
        const DEFAULT_CATEGORIES = ['ƒÇn u·ªëng', 'H·ªçc t·∫≠p', 'Gi·∫£i tr√≠', 'Kh√°c'];
        
        // L·∫•y d·ªØ li·ªáu t·ª´ LocalStorage ho·∫∑c kh·ªüi t·∫°o m·ªõi
        let categories = JSON.parse(localStorage.getItem('categories')) || DEFAULT_CATEGORIES;
        let expenses = JSON.parse(localStorage.getItem('expenses')) || [];

        // ===== H√ÄM L∆ØU D·ªÆ LI·ªÜU =====
        function saveToLocalStorage() {
            localStorage.setItem('categories', JSON.stringify(categories));
            localStorage.setItem('expenses', JSON.stringify(expenses));
        }

        // ===== QU·∫¢N L√ù DANH M·ª§C =====
        
        // Hi·ªÉn th·ªã danh m·ª•c trong dropdown
        function renderCategories() {
            const select = document.getElementById('expenseCategory');
            select.innerHTML = '';
            
            categories.forEach(category => {
                const option = document.createElement('option');
                option.value = category;
                option.textContent = category;
                select.appendChild(option);
            });
        }

        // Th√™m danh m·ª•c m·ªõi
        function addCategory() {
            const newCategoryInput = document.getElementById('newCategoryName');
            const newCategory = newCategoryInput.value.trim();
            
            if (!newCategory) {
                alert('Vui l√≤ng nh·∫≠p t√™n danh m·ª•c!');
                return;
            }
            
            if (categories.includes(newCategory)) {
                alert('Danh m·ª•c n√†y ƒë√£ t·ªìn t·∫°i!');
                return;
            }
            
            categories.push(newCategory);
            saveToLocalStorage();
            renderCategories();
            newCategoryInput.value = '';
            alert(`ƒê√£ th√™m danh m·ª•c "${newCategory}"!`);
        }

        // X√≥a danh m·ª•c ƒëang ch·ªçn
        function deleteCategory() {
            const select = document.getElementById('expenseCategory');
            const selectedCategory = select.value;
            
            if (categories.length <= 1) {
                alert('Ph·∫£i c√≥ √≠t nh·∫•t 1 danh m·ª•c!');
                return;
            }
            
            // Ki·ªÉm tra xem c√≥ kho·∫£n chi n√†o ƒëang d√πng danh m·ª•c n√†y kh√¥ng
            const hasExpenses = expenses.some(exp => exp.category === selectedCategory);
            if (hasExpenses) {
                if (!confirm(`C√≥ ${expenses.filter(exp => exp.category === selectedCategory).length} kho·∫£n chi thu·ªôc danh m·ª•c "${selectedCategory}". B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a?`)) {
                    return;
                }
            }
            
            categories = categories.filter(cat => cat !== selectedCategory);
            saveToLocalStorage();
            renderCategories();
            renderExpenses();
            alert(`ƒê√£ x√≥a danh m·ª•c "${selectedCategory}"!`);
        }

        // ===== QU·∫¢N L√ù CHI TI√äU =====
        
        // Th√™m kho·∫£n chi m·ªõi
        document.getElementById('expenseForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const name = document.getElementById('expenseName').value.trim();
            const amount = parseFloat(document.getElementById('expenseAmount').value);
            const category = document.getElementById('expenseCategory').value;
            
            if (!name || amount <= 0) {
                alert('Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß th√¥ng tin h·ª£p l·ªá!');
                return;
            }
            
            // T·∫°o kho·∫£n chi m·ªõi
            const expense = {
                id: Date.now(), // ID duy nh·∫•t d·ª±a tr√™n timestamp
                name: name,
                amount: amount,
                category: category,
                date: new Date().toLocaleString('vi-VN')
            };
            
            expenses.push(expense);
            saveToLocalStorage();
            
            // Reset form
            this.reset();
            
            // C·∫≠p nh·∫≠t giao di·ªán
            renderExpenses();
            updateTotal();
        });

        // X√≥a kho·∫£n chi
        function deleteExpense(id) {
            if (confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a kho·∫£n chi n√†y?')) {
                expenses = expenses.filter(exp => exp.id !== id);
                saveToLocalStorage();
                renderExpenses();
                updateTotal();
            }
        }

        // Hi·ªÉn th·ªã danh s√°ch chi ti√™u
        function renderExpenses() {
            const container = document.getElementById('expenseListContainer');
            
            if (expenses.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <svg fill="currentColor" viewBox="0 0 20 20">
                            <path d="M4 4a2 2 0 00-2 2v1h16V6a2 2 0 00-2-2H4z"></path>
                            <path fill-rule="evenodd" d="M18 9H2v5a2 2 0 002 2h12a2 2 0 002-2V9zM4 13a1 1 0 011-1h1a1 1 0 110 2H5a1 1 0 01-1-1zm5-1a1 1 0 100 2h1a1 1 0 100-2H9z" clip-rule="evenodd"></path>
                        </svg>
                        <p>Ch∆∞a c√≥ kho·∫£n chi n√†o. H√£y th√™m kho·∫£n chi ƒë·∫ßu ti√™n!</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = '';
            
            // Hi·ªÉn th·ªã t·ª´ng kho·∫£n chi (m·ªõi nh·∫•t l√™n ƒë·∫ßu)
            expenses.slice().reverse().forEach(expense => {
                const div = document.createElement('div');
                div.className = 'expense-item';
                div.innerHTML = `
                    <div class="expense-info">
                        <div class="expense-name">${expense.name}</div>
                        <span class="expense-category">${expense.category}</span>
                    </div>
                    <div class="expense-amount">${formatCurrency(expense.amount)}</div>
                    <button class="btn-delete" onclick="deleteExpense(${expense.id})">X√≥a</button>
                `;
                container.appendChild(div);
            });
        }

        // C·∫≠p nh·∫≠t t·ªïng chi ti√™u
        function updateTotal() {
            const total = expenses.reduce((sum, exp) => sum + exp.amount, 0);
            document.getElementById('totalAmount').textContent = formatCurrency(total);
        }

        // Format ti·ªÅn t·ªá
        function formatCurrency(amount) {
            return amount.toLocaleString('vi-VN') + ' ‚Ç´';
        }

        // ===== KH·ªûI ƒê·ªòNG ·ª®NG D·ª§NG =====
        function init() {
            renderCategories();
            renderExpenses();
            updateTotal();
        }

        // Ch·∫°y khi trang load xong
        init();
    </script>
</body>
</html>
